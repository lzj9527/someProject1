<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"/>
    <title>ç‰¹æ®Šå·¥è‰ºå¯¹æˆ’</title>

    <link rel="stylesheet" href="https://at.alicdn.com/t/font_941616_wdr3e332oq.css"><!-- icon -->
    <link rel="stylesheet" href="../static/css/reset.css">
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/new-specialDoubleRingDetail.css">
    <script src="../static/js/config.js"></script>
    <script src="../static/js/jquery-3.0.0.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
    <script src="../static/js/androidJSInterface.js"></script>
    <script src="../static/js/function.js"></script>
    <script src="../static/js/showToast.js"></script>
</head>
<body>


<div id="orderDoubleGoodsDetailPageBox" @touchstart="touchS" @touchmove="touchM" @touchend="touchE">

    <header>
        <p class="titleAndCollect">
            <span class="title">ç‰¹æ®Šå·¥è‰ºå¯¹æˆ’</span>
            <span class="iconfont icon-heart-b"></span>
            <!--<span class="iconfont icon-heart-br"></span>-->
        </p>
        <section class="styleNumAndGoldWeight">
            <p class="styleNum">
                <span class="title">æ¬¾å·ï¼š</span>
                <span>TZA-940504</span>
            </p>
            <div class="goldWeight">
                <span class="title"> é¢„ä¼°é‡é‡ï¼š</span>
                <p>
                    <span class="man">ç”·æˆ’çº¦ 6 g</span>
                    <span class="wom">å¥³æˆ’çº¦ 6 g</span>
                </p>
            </div>
        </section>
    </header>

    <section class="estimationPrice">
        <span class="title"> é¢„ä¼°ä»·æ ¼ï¼š</span>
        <div class="price">
            <p class="man">
                <span>ç”·æ¬¾</span>
                <small>çº¦</small>
                <strong>ï¿¥4999</strong>
            </p>
            <p class="wom">
                <span>å¥³æ¬¾</span>
                <small>çº¦</small>
                <strong>ï¿¥3888</strong>
            </p>
        </div>
    </section>

    <!-- æ‰‹å¯¸ -->
    <section class="handSizeBox">
        <div class="handSizeMBox">
            <span class="handSizeText">ç”·æ¬¾æ‰‹å¯¸: </span>
            <span class="iconfont icon-jian" @click.stop="specialManReduceFn()"></span>
            <span class="handSizeNum" @click.stop="handSizeNumManClickFn(sexMan)" :data-sex="sexMan"> {{curManSize}} </span>
            <span class="iconfont icon-jia" @click.stop="specialManPlusFn()"></span>
        </div>

        <div class="handSizeWBox">
            <span class="handSizeText">å¥³æ¬¾æ‰‹å¯¸:</span>
            <span class="iconfont icon-jian" @click.stop="specialWomReduceFn()"></span>
            <span class="handSizeNum" @click.stop="handSizeNumWomClickFn(sexWom)" :data-sex="sexWom"> {{curWomSize}} </span>
            <span class="iconfont icon-jia" @click.stop="specialWomPlusFn()"></span>
        </div>
    </section>

    <!-- åˆ»å­— -->
    <section class="letteringBox">
        <div class="letterMan">
            <span class="title">ç”·æ¬¾åˆ»å­—: </span>
            <textarea id="manLetter" cols="1" rows="1" maxlength="8" placeholder="Y&M" @click="inputFocus()"></textarea>
            <span class="symbol" :data-sex="sexMan" @click="fastAndBtn(sexMan)" >&</span>
            <span class="symbol" :data-sex="sexMan" @click="fastHeartBtn(sexMan)" >ğŸ’—</span>
        </div>

        <div class="letterWom">
            <span class="title">å¥³æ¬¾åˆ»å­—:</span>
            <textarea id="womLetter" cols="1" rows="1" maxlength="8" placeholder="Y&M" @click="inputFocus()"></textarea>
            <span class="symbol" :data-sex="sexWom" @click="fastAndBtn(sexWom)" >&</span>
            <span class="symbol" :data-sex="sexWom" @click="fastHeartBtn(sexWom)" >ğŸ’—</span>
        </div>
    </section>

    <!-- å¤‡æ³¨ -->
    <section class="marksBox">
        <span class="title">å¤‡æ³¨ï¼š</span>
        <textarea cols="30" rows="10" @click="inputFocus()"></textarea>
    </section>

    <!-- æäº¤è´­ç‰©è½¦ -->
    <footer class="btnBox">
        <span class="addCartBtn">åŠ å…¥è´­ç‰©è½¦</span>
        <span class="orderBtn">ç«‹å³ä¸‹è®¢</span>
    </footer>

    <!-- æ‰‹å¯¸ selection -->
    <div class="handSizeSelectOutSideBox" @click="handSizeSelectOutSideBoxClickFn()">
        <div class="handSizeSelectInSideBox">
            <ul>
                <li v-for="(item,index) in handSizeSelectArray" :key="item.index" :data-index="index"
                    @click.stop="selectItemClickFn(index)" :class="item.choose === true?'isChooseSelect':''">
                    {{item.size}}
                </li>
            </ul>
        </div>
    </div>

    <!-- ä¸ºäº†è¾“å…¥çš„æ—¶å€™ä¸è¢«é®æŒ¡ -->
    <div class="forInputBox"></div>

</div>

<script>
    let vm = new Vue({
        el: '#orderDoubleGoodsDetailPageBox',// é€‰é¡¹
        data() {
            return {
                isReachTop: true,
                isReachBottom: false,
                curManSize: 20,
                curWomSize: 12,
                sexMan:'man',
                sexWom:'wom',
                nowSex:'',
                handSizeArray: [],
                handSizeSelectArray:[],
            }
        },
        beforeCreate() {
            console.group('------beforeCreateåˆ›å»ºå‰çŠ¶æ€------');
            console.log("%c%s", "color:red", "el     : " + this.orderDouble); //undefined
            console.log("%c%s", "color:red", "data   : " + this.orderDouble); //undefined
            console.log("%c%s", "color:red", "message: " + this.message);
        },
        created() {
            console.group('------createdåˆ›å»ºå®Œæ¯•çŠ¶æ€------');
            console.log("%c%s", "color:red", "el     : " + this.orderDouble); //undefined
            console.log("%c%s", "color:red", "data   : " + this.orderDouble); //å·²è¢«åˆå§‹åŒ–
            console.log("%c%s", "color:red", "message: " + this.message); //å·²è¢«åˆå§‹åŒ–
        },
        beforeMount() {
            console.group('------beforeMountæŒ‚è½½å‰çŠ¶æ€------');
            let vm = this,
                handSizeArray = vm.handSizeArray;
            handSizeCustomized(handSizeArray);

        },
        mounted() {
            let vm = this;
            console.group('------beforeMountæŒ‚è½½å®ŒæˆçŠ¶æ€------');

            $(".forInputBox").hide();

//          ç›‘å¬é¡µé¢æ»šåŠ¨
            window.onscroll = function () {
                vm.isReachTop = true;
                vm.isReachBottom = false;
                //ç›‘å¬äº‹ä»¶å†…å®¹
                if (getDocumentScrollTop() + getWindowClientHeight() >= getScrollHeight()) {
                    console.log("è§¦åº•äº†");
                    vm.isReachBottom = true
                }
                if (getDocumentScrollTop() <= 0) {
                    console.log("è§¦é¡¶äº†");
                    vm.isReachTop = true;
                }

//                console.log("æ˜¯å¦åˆ°è¾¾é¡¶éƒ¨------" + vm.isReachTop);
//                console.log("æ˜¯å¦åˆ°è¾¾åº•éƒ¨------" + vm.isReachBottom);
            };

            //        å­—ä½“è‡ªé€‚åº”
            function fixRem() {
                let windowWidth = document.documentElement.clientWidth || window.innerWidth || document.body.clientWidth;
                // windowWidth = windowWidth > 750 ? 750 : windowWidth;
                let rootSize = 28 * (windowWidth / 375);
                let htmlNode = document.getElementsByTagName("html")[0];
                htmlNode.style.fontSize = rootSize + 'px';
            }
            fixRem();
            window.addEventListener('resize', fixRem, false);
        },
        updated: function () {
            console.group('updated æ›´æ–°å®ŒæˆçŠ¶æ€===============ã€‹');
        },
        methods: {
            //          é˜»æ­¢é¡µé¢ç¼©æ”¾
            touchS(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            },
            touchM(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            },
            touchE(e) {
                if (e.touches.length > 1) {
                    e.preventDefault();
                }
            },

            //          ç‰¹æ®Šå·¥è‰ºçš„æ‰‹å¯¸æ“ä½œ
            specialManReduceFn() {
//                å‡
                let vm = this,
                    minHandSize = 7,
                    curManSize = vm.curManSize;

                if (curManSize <= minHandSize) {
                    showToast("å·²æ˜¯æœ€å°æ‰‹å¯¸");
                } else {
                    vm.curManSize = Number(curManSize) - 0.5;
                }

            },
            specialWomReduceFn() {
//                å‡
                let vm = this,
                    minHandSize = 7,
                    curWomSize = vm.curWomSize;

                if (curWomSize <= minHandSize) {
                    showToast("å·²æ˜¯æœ€å°æ‰‹å¯¸");
                } else {
                    vm.curWomSize = Number(curWomSize) - 0.5;
                }

            },
            specialManPlusFn() {
//                åŠ 
                let vm = this,
                    maxHandSize = 25.5,
                    curManSize = vm.curManSize;

                if (curManSize >= maxHandSize) {
                    showToast("å·²æ˜¯æœ€å¤§æ‰‹å¯¸");
                } else {
                    vm.curManSize = Number(curManSize) + 0.5;
                }

            },
            specialWomPlusFn() {
//                åŠ 
                let vm = this,
                    maxHandSize = 25.5,
                    curWomSize = vm.curWomSize;

                if (curWomSize >= maxHandSize) {
                    showToast("å·²æ˜¯æœ€å¤§æ‰‹å¯¸");
                } else {
                    vm.curWomSize = Number(curWomSize) + 0.5;
                }
            },

            handSizeNumManClickFn(sex){
                $(".handSizeSelectOutSideBox").fadeIn();
                setTimeout(function () {
                    $(".handSizeSelectInSideBox").slideDown();
                }, 100);

                $(".handSizeSelectInSideBox ul").animate({scrollTop: 0}, 100);

                let vm = this,
                    defaultHandSize = vm.curManSize,
                    handSizeArray = vm.handSizeArray,
                    handSizeSelectArray = [],
                    forSelectChooseArray = [];

                vm.nowSex = sex;
                handSizeSelectArray.push(...handSizeArray);

                for (let i = 0, len = handSizeSelectArray.length; i < len; i++) {
                    forSelectChooseArray.push(handSizeSelectArray[i].size)
                }
                let defaultHandSizeIndex = forSelectChooseArray.indexOf(defaultHandSize);
                for (let i = 0, len = handSizeSelectArray.length; i < len; i++) {
                    handSizeSelectArray[i].choose = false
                }
                handSizeSelectArray[defaultHandSizeIndex].choose = true;

                vm.handSizeSelectArray = handSizeSelectArray.slice(handSizeSelectArray);
                console.log(vm.handSizeSelectArray);
            },
            handSizeNumWomClickFn(sex){
                $(".handSizeSelectOutSideBox").fadeIn();
                setTimeout(function () {
                    $(".handSizeSelectInSideBox").slideDown();
                }, 100);

                $(".handSizeSelectInSideBox ul").animate({scrollTop: 0}, 100);

                let vm = this,
                    defaultHandSize = vm.curWomSize,
                    handSizeArray = vm.handSizeArray,
                    handSizeSelectArray = [],
                    forSelectChooseArray = [];

                vm.nowSex = sex;
                handSizeSelectArray.push(...handSizeArray);

                for (let i = 0, len = handSizeSelectArray.length; i < len; i++) {
                    forSelectChooseArray.push(handSizeSelectArray[i].size)
                }
                let defaultHandSizeIndex = forSelectChooseArray.indexOf(defaultHandSize);
                for (let i = 0, len = handSizeSelectArray.length; i < len; i++) {
                    handSizeSelectArray[i].choose = false
                }
                handSizeSelectArray[defaultHandSizeIndex].choose = true;

                vm.handSizeSelectArray = handSizeSelectArray.slice(handSizeSelectArray);
                console.log(vm.handSizeSelectArray);
            },
//          æ‰‹å¯¸ select ä¸ è’™ç‰ˆ æ“ä½œ
            handSizeSelectOutSideBoxClickFn(){
                $(".handSizeSelectInSideBox").slideUp();
                setTimeout(function () {
                    $(".handSizeSelectOutSideBox").fadeOut();
                }, 300);
            },
            selectItemClickFn(index){
                let vm = this,
                    handSizeSelectArray = vm.handSizeSelectArray;

//                console.log("å½“å‰é€‰ä¸­çš„æ‰‹å¯¸ä¸‹æ ‡ä¸º-----" + index);

                for (let i = 0, len = handSizeSelectArray.length; i < len; i++) {
                    handSizeSelectArray[i].choose = false
                }
                handSizeSelectArray[index].choose = true;

                if(vm.nowSex === 'man'){
                    vm.curManSize = handSizeSelectArray[index].size;
                }
                if(vm.nowSex === 'wom'){
                    vm.curWomSize = handSizeSelectArray[index].size;
                }



                $(".handSizeSelectInSideBox").slideUp();
                setTimeout(function () {
                    $(".handSizeSelectOutSideBox").fadeOut();
                }, 300);

            },

            //    å¿«é€Ÿè¾“å…¥
            fastAndBtn(sex) {
                if (sex === 'man') {
                    $("#manLetter").insertString("&");
                }else{
                    $("#womLetter").insertString("&");
                }
            },
            fastHeartBtn(sex) {
                if (sex === 'man') {
                    $("#manLetter").insertString("ğŸ’—");
                }else{
                    $("#womLetter").insertString("ğŸ’—");
                }
            },

            //          è¾“å…¥æ¡†ç‚¹å‡»
            inputFocus(){
                $(".forInputBox").show();
            },

        },
        computed: {},
        watch: {

        }
    });

    /** ç›‘å¬é¡µé¢æ»šåŠ¨ ********** Start *******/
    //æ–‡æ¡£é«˜åº¦
    function getDocumentScrollTop() {
        let scrollTop = 0, bodyScrollTop = 0, documentScrollTop = 0;
        if (document.body) {
            bodyScrollTop = document.body.scrollTop;
        }
        if (document.documentElement) {
            documentScrollTop = document.documentElement.scrollTop;
        }
        scrollTop = (bodyScrollTop - documentScrollTop > 0) ? bodyScrollTop : documentScrollTop;
//        console.log(scrollTop);
        return scrollTop;
    }

    //å¯è§†çª—å£é«˜åº¦
    function getWindowClientHeight() {
        let windowHeight = 0;
        if (document.compatMode == "CSS1Compat") {
            windowHeight = document.documentElement.clientHeight;
        } else {
            windowHeight = document.body.clientHeight;
        }
//        console.log(windowHeight);
        return windowHeight;
    }

    //æ»šåŠ¨æ¡æ»šåŠ¨é«˜åº¦
    function getScrollHeight() {
        let scrollHeight = 0, bodyScrollHeight = 0, documentScrollHeight = 0;
        if (document.body) {
            bodyScrollHeight = document.body.scrollHeight;
        }
        if (document.documentElement) {
            documentScrollHeight = document.documentElement.scrollHeight;
        }
        scrollHeight = (bodyScrollHeight - documentScrollHeight > 0) ? bodyScrollHeight : documentScrollHeight;
//        console.log(scrollHeight);
        return scrollHeight;
    }

    /** ç›‘å¬é¡µé¢æ»šåŠ¨ ********** End *******/


    //    æ‰‹å¯¸(7.5-25.5)
    function handSizeCustomized(array) {
        for (let i = 7, len = 26; i < len; i += 0.5) {
//            array.customized.push(i);
            let sizeSelect =
                {
                    size: i,
                    choose: false
                };
            array.push(sizeSelect)
        }
        this.array = array.slice(array);
    }
</script>
</body>
</html>





























